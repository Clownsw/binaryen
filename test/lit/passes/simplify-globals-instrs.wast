;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; NOTE: This test was ported using port_passes_tests_to_lit.py and could be cleaned up.

;; RUN: foreach %s %t wasm-opt --simplify-globals --enable-mutable-globals -S -o - | filecheck %s

;; The globals will become immutable, and after doing so we can propagate the
;; value of the first into the second. The second's value then becomes constant
;; as well.
(module
  (global $A (mut i32) (i32.const 40))

  (global $B (mut i32) (i32.add
    (global.get $A)
    (i32.const 2)
  ))
)
